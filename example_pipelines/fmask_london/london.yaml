configurations:
  eo_pipelines:
    properties:
      spec:
        lat_min: 51.3
        lat_max: 51.7
        lon_min: -0.2
        lon_max: 0.1
        start_date: "2023-07-01"
        end_date: "2023-07-30"
        max_cloud_cover_fraction: 1
        datasets:
          LANDSAT_OT_C2_L1:
            bands: [ B1, B2, B3, B4, B5, B6, B7, B8, B9, B10, B11, QA_PIXEL, VAA, VZA, SAA, SZA ]
      environment:
        working_directory: .
        conda_path: /home/dev/miniforge3/bin/conda
        shell: "/bin/bash"
        echo_stdout: True
nodes:
  n0:
    type: eo_pipelines:usgs_search
    properties:
      configuration:
        row: 24
        path: 201
      executor_settings:
        can_skip: true
  n1:
    type: eo_pipelines:usgs_fetch
    properties:
      configuration:
        output_path: fetched
      executor_settings:
        can_skip: true
  n2:
    type: eo_pipelines:apply_fmask
    properties:
      executor_settings:
        can_skip: 4
        executor: local
        local:
          nr_threads: 1
      configuration:
        output_path: masked
        model: UPL
        fmask_home: /home/dev/Tools/fmask/fmask
        dataset: LANDSAT_OT_C2_L1
  n3:
    type: eo_pipelines:landsat_import
    properties:
      executor_settings:
        can_skip: 4
        executor: local
        local:
          nr_threads: 1
      configuration:
        output_path: imported
        extra_bands:
          LANDSAT_OT_C2_L1:
            - UPL

links:
  - n0 => n1
  - n1 => n2
  - n2 => n3
